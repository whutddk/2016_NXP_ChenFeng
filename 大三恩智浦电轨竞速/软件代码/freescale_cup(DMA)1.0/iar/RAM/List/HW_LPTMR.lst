###############################################################################
#
# IAR ANSI C/C++ Compiler V7.20.2.7424/W32 for ARM        06/Mar/2016  20:36:24
# Copyright 1999-2014 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  D:\LPLDV3.1\LPLD_OSKinetis_V3\lib\LPLD\HW\HW_LPTMR.c
#    Command line =  
#        D:\LPLDV3.1\LPLD_OSKinetis_V3\lib\LPLD\HW\HW_LPTMR.c -D LPLD_K60 -D
#        USE_K60DZ10 -lCN
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\RAM\List\"
#        -lB
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\RAM\List\"
#        -o
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\RAM\Obj\"
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M4 -e --fpu=None --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        7.0\arm\INC\c\DLib_Config_Normal.h" -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\app\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\app\MAIN\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\app\BSP\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\app\ITAC\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\app\CTL\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\app\SENSOR\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\CPU\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\common\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\LPLD\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\LPLD\HW\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\LPLD\DEV\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\LPLD\FUNC\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\uCOS-II\Ports\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\uCOS-II\Source\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\FatFs\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\FatFs\option\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\USB\common\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\USB\driver\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\USB\descriptor\"
#        -I
#        "D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\..\..\..\lib\USB\class\"
#        -On -I "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.0\arm\CMSIS\Include\" -D ARM_MATH_CM4
#    List file    =  
#        D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\RAM\List\HW_LPTMR.lst
#    Object file  =  
#        D:\LPLDV3.1\LPLD_OSKinetis_V3\project\freescale_cup(DMA)1.0\iar\RAM\Obj\HW_LPTMR.o
#
###############################################################################

D:\LPLDV3.1\LPLD_OSKinetis_V3\lib\LPLD\HW\HW_LPTMR.c
      1          /**
      2           * @file HW_LPTMR.c
      3           * @version 3.0[By LPLD]
      4           * @date 2013-06-18
      5           * @brief LPTMR底层模块相关函数
      6           *
      7           * 更改建议:不建议修改
      8           *
      9           * 版权所有:北京拉普兰德电子技术有限公司
     10           * http://www.lpld.cn
     11           * mail:support@lpld.cn
     12           *
     13           * @par
     14           * 本代码由拉普兰德[LPLD]开发并维护，并向所有使用者开放源代码。
     15           * 开发者可以随意修使用或改源代码。但本段及以上注释应予以保留。
     16           * 不得更改或删除原版权所有者姓名，二次开发者可以加注二次版权所有者。
     17           * 但应在遵守此协议的基础上，开放源代码、不得出售代码本身。
     18           * 拉普兰德不负责由于使用本代码所带来的任何事故、法律责任或相关不良影响。
     19           * 拉普兰德无义务解释、说明本代码的具体原理、功能、实现方法。
     20           * 除非拉普兰德[LPLD]授权，开发者不得将本代码用于商业产品。
     21           */
     22          
     23          #include "common.h"

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void NVIC_EnableIRQ(IRQn_Type)
   \                     NVIC_EnableIRQ: (+1)
   \   00000000   0x2101             MOVS     R1,#+1
   \   00000002   0xF010 0x021F      ANDS     R2,R0,#0x1F
   \   00000006   0x4091             LSLS     R1,R1,R2
   \   00000008   0x....             LDR.N    R2,??DataTable7  ;; 0xe000e100
   \   0000000A   0xB240             SXTB     R0,R0            ;; SignExt  R0,R0,#+24,#+24
   \   0000000C   0x0943             LSRS     R3,R0,#+5
   \   0000000E   0xF842 0x1023      STR      R1,[R2, R3, LSL #+2]
   \   00000012   0x4770             BX       LR               ;; return

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void NVIC_DisableIRQ(IRQn_Type)
   \                     NVIC_DisableIRQ: (+1)
   \   00000000   0x2101             MOVS     R1,#+1
   \   00000002   0xF010 0x021F      ANDS     R2,R0,#0x1F
   \   00000006   0x4091             LSLS     R1,R1,R2
   \   00000008   0x....             LDR.N    R2,??DataTable7_1  ;; 0xe000e180
   \   0000000A   0xB240             SXTB     R0,R0            ;; SignExt  R0,R0,#+24,#+24
   \   0000000C   0x0943             LSRS     R3,R0,#+5
   \   0000000E   0xF842 0x1023      STR      R1,[R2, R3, LSL #+2]
   \   00000012   0x4770             BX       LR               ;; return
     24          #include "HW_LPTMR.h"
     25          

   \                                 In section .bss, align 4
     26          LPTMR_ISR_CALLBACK LPTMR_ISR[1];
   \                     LPTMR_ISR:
   \   00000000                      DS8 4
     27          
     28          /*
     29           * LPLD_LPTMR_Init
     30           * LPTMR初始化函数
     31           * 
     32           * 参数:
     33           *    lptmr_init_structure--LPTMR初始化结构体，
     34           *                         具体定义见LPTMR_InitTypeDef 
     35           * 输出:
     36           *    0--配置错误
     37           *    1--配置成功
     38           */

   \                                 In section .text, align 2, keep-with-next
     39          uint8 LPLD_LPTMR_Init(LPTMR_InitTypeDef lptmr_init_structure)
     40          {
   \                     LPLD_LPTMR_Init: (+1)
   \   00000000   0xB5F7             PUSH     {R0-R2,R4-R7,LR}
     41            uint8  mode = lptmr_init_structure.LPTMR_Mode; 
   \   00000002   0xF89D 0x4000      LDRB     R4,[SP, #+0]
     42            uint16 period_ms = lptmr_init_structure.LPTMR_PeriodMs;
   \   00000006   0xF8BD 0x5002      LDRH     R5,[SP, #+2]
     43            uint8  pluseacc_input = lptmr_init_structure.LPTMR_PluseAccInput;
   \   0000000A   0xF89D 0x6004      LDRB     R6,[SP, #+4]
     44            LPTMR_ISR_CALLBACK isr_func = lptmr_init_structure.LPTMR_Isr;
   \   0000000E   0x9F02             LDR      R7,[SP, #+8]
     45          
     46            ASSERT(mode <= LPTMR_MODE_PLACC );
   \   00000010   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000012   0x2C02             CMP      R4,#+2
   \   00000014   0xDB03             BLT.N    ??LPLD_LPTMR_Init_0
   \   00000016   0x212E             MOVS     R1,#+46
   \   00000018   0x....             LDR.N    R0,??DataTable7_2
   \   0000001A   0x.... 0x....      BL       assert_failed
     47            ASSERT(pluseacc_input <= LPTMR_ALT2 );
   \                     ??LPLD_LPTMR_Init_0: (+1)
   \   0000001E   0xB2F6             UXTB     R6,R6            ;; ZeroExt  R6,R6,#+24,#+24
   \   00000020   0x2E03             CMP      R6,#+3
   \   00000022   0xDB03             BLT.N    ??LPLD_LPTMR_Init_1
   \   00000024   0x212F             MOVS     R1,#+47
   \   00000026   0x....             LDR.N    R0,??DataTable7_2
   \   00000028   0x.... 0x....      BL       assert_failed
     48          
     49            //初始化LPTMR时钟
     50            SIM->SCGC5|=SIM_SCGC5_LPTIMER_MASK;  
   \                     ??LPLD_LPTMR_Init_1: (+1)
   \   0000002C   0x....             LDR.N    R0,??DataTable7_3  ;; 0x40048038
   \   0000002E   0x6800             LDR      R0,[R0, #+0]
   \   00000030   0xF050 0x0001      ORRS     R0,R0,#0x1
   \   00000034   0x....             LDR.N    R1,??DataTable7_3  ;; 0x40048038
   \   00000036   0x6008             STR      R0,[R1, #+0]
     51             
     52            //清空寄存器
     53            LPTMR0->CSR = 0x00;                   
   \   00000038   0x2000             MOVS     R0,#+0
   \   0000003A   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   0000003C   0x6008             STR      R0,[R1, #+0]
     54            LPTMR0->PSR = 0x00;
   \   0000003E   0x2000             MOVS     R0,#+0
   \   00000040   0x....             LDR.N    R1,??DataTable7_5  ;; 0x40040004
   \   00000042   0x6008             STR      R0,[R1, #+0]
     55            LPTMR0->CMR = 0x00;
   \   00000044   0x2000             MOVS     R0,#+0
   \   00000046   0x....             LDR.N    R1,??DataTable7_6  ;; 0x40040008
   \   00000048   0x6008             STR      R0,[R1, #+0]
     56             
     57            if(mode == LPTMR_MODE_TIMER)          // 配置成低功耗定时器功能
   \   0000004A   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000004C   0x2C00             CMP      R4,#+0
   \   0000004E   0xD106             BNE.N    ??LPLD_LPTMR_Init_2
     58            {    
     59              /* 配置LPTMR */
     60              // LPO 1Khz
     61              //设置比较的值
     62              //使用内部时钟 分频系数Prescale为 2^(X+1)
     63              //定时器的一个计数周期=时钟源(Clk_Src)/ 预分频值(Prescale)
     64              //定时器的定时值=设置的比较值(compare_value)/定时器的一个计数周期
     65              LPTMR0->CMR = LPTMR_CMR_COMPARE(period_ms);                 //设置比较值
   \   00000050   0xB2AD             UXTH     R5,R5            ;; ZeroExt  R5,R5,#+16,#+16
   \   00000052   0x....             LDR.N    R0,??DataTable7_6  ;; 0x40040008
   \   00000054   0x6005             STR      R5,[R0, #+0]
     66              LPTMR0->PSR = LPTMR_PSR_PCS(0x1)|LPTMR_PSR_PBYP_MASK;       //采用LPO时钟旁路使能
   \   00000056   0x2005             MOVS     R0,#+5
   \   00000058   0x....             LDR.N    R1,??DataTable7_5  ;; 0x40040004
   \   0000005A   0x6008             STR      R0,[R1, #+0]
   \   0000005C   0xE026             B.N      ??LPLD_LPTMR_Init_3
     67                  
     68            }
     69            else if(mode == LPTMR_MODE_PLACC)             //配置成脉冲捕获模式
   \                     ??LPLD_LPTMR_Init_2: (+1)
   \   0000005E   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000060   0x2C01             CMP      R4,#+1
   \   00000062   0xD123             BNE.N    ??LPLD_LPTMR_Init_3
     70            {
     71              
     72              if(pluseacc_input == LPTMR_ALT1)            //PTA19引脚
   \   00000064   0xB2F6             UXTB     R6,R6            ;; ZeroExt  R6,R6,#+24,#+24
   \   00000066   0x2E01             CMP      R6,#+1
   \   00000068   0xD104             BNE.N    ??LPLD_LPTMR_Init_4
     73              {
     74                PORTA->PCR[19] = PORT_PCR_MUX(0x6);       //设置PTA19为脉冲累加
   \   0000006A   0xF44F 0x60C0      MOV      R0,#+1536
   \   0000006E   0x....             LDR.N    R1,??DataTable7_7  ;; 0x4004904c
   \   00000070   0x6008             STR      R0,[R1, #+0]
   \   00000072   0xE006             B.N      ??LPLD_LPTMR_Init_5
     75              }
     76              else if(pluseacc_input == LPTMR_ALT2)       //PTC5引脚
   \                     ??LPLD_LPTMR_Init_4: (+1)
   \   00000074   0xB2F6             UXTB     R6,R6            ;; ZeroExt  R6,R6,#+24,#+24
   \   00000076   0x2E02             CMP      R6,#+2
   \   00000078   0xD103             BNE.N    ??LPLD_LPTMR_Init_5
     77              {
     78                PORTC->PCR[5] = PORT_PCR_MUX(0x4);        //设置PTC5为脉冲累加  
   \   0000007A   0xF44F 0x6080      MOV      R0,#+1024
   \   0000007E   0x....             LDR.N    R1,??DataTable7_8  ;; 0x4004b014
   \   00000080   0x6008             STR      R0,[R1, #+0]
     79              }
     80          
     81              //与所用的内部时钟无关
     82              //外部输入的信号作为计数时钟
     83              LPTMR0->PSR = LPTMR_PSR_PCS(0x1)|LPTMR_PSR_PBYP_MASK; 
   \                     ??LPLD_LPTMR_Init_5: (+1)
   \   00000082   0x2005             MOVS     R0,#+5
   \   00000084   0x....             LDR.N    R1,??DataTable7_5  ;; 0x40040004
   \   00000086   0x6008             STR      R0,[R1, #+0]
     84              LPTMR0->CSR = LPTMR_CSR_TPS(pluseacc_input);
   \   00000088   0xB2F6             UXTB     R6,R6            ;; ZeroExt  R6,R6,#+24,#+24
   \   0000008A   0x0130             LSLS     R0,R6,#+4
   \   0000008C   0xF010 0x0030      ANDS     R0,R0,#0x30
   \   00000090   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   00000092   0x6008             STR      R0,[R1, #+0]
     85              LPTMR0->CSR |= LPTMR_CSR_TMS_MASK; //捕获模式
   \   00000094   0x....             LDR.N    R0,??DataTable7_4  ;; 0x40040000
   \   00000096   0x6800             LDR      R0,[R0, #+0]
   \   00000098   0xF050 0x0002      ORRS     R0,R0,#0x2
   \   0000009C   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   0000009E   0x6008             STR      R0,[R1, #+0]
     86              LPTMR0->CSR |= LPTMR_CSR_TFC_MASK; //自由计数模式
   \   000000A0   0x....             LDR.N    R0,??DataTable7_4  ;; 0x40040000
   \   000000A2   0x6800             LDR      R0,[R0, #+0]
   \   000000A4   0xF050 0x0004      ORRS     R0,R0,#0x4
   \   000000A8   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   000000AA   0x6008             STR      R0,[R1, #+0]
     87            }
     88            
     89            if(lptmr_init_structure.LPTMR_IntEnable == TRUE && isr_func != NULL)
   \                     ??LPLD_LPTMR_Init_3: (+1)
   \   000000AC   0xF89D 0x0005      LDRB     R0,[SP, #+5]
   \   000000B0   0x2801             CMP      R0,#+1
   \   000000B2   0xD10A             BNE.N    ??LPLD_LPTMR_Init_6
   \   000000B4   0x0038             MOVS     R0,R7
   \   000000B6   0x2800             CMP      R0,#+0
   \   000000B8   0xD007             BEQ.N    ??LPLD_LPTMR_Init_6
     90            {
     91              LPTMR_ISR[0] = isr_func;
   \   000000BA   0x....             LDR.N    R0,??DataTable7_9
   \   000000BC   0x6007             STR      R7,[R0, #+0]
     92              LPTMR0->CSR |= LPTMR_CSR_TIE_MASK;
   \   000000BE   0x....             LDR.N    R0,??DataTable7_4  ;; 0x40040000
   \   000000C0   0x6800             LDR      R0,[R0, #+0]
   \   000000C2   0xF050 0x0040      ORRS     R0,R0,#0x40
   \   000000C6   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   000000C8   0x6008             STR      R0,[R1, #+0]
     93            }
     94          
     95            LPTMR0->CSR |= LPTMR_CSR_TEN_MASK; //开启LPTMR
   \                     ??LPLD_LPTMR_Init_6: (+1)
   \   000000CA   0x....             LDR.N    R0,??DataTable7_4  ;; 0x40040000
   \   000000CC   0x6800             LDR      R0,[R0, #+0]
   \   000000CE   0xF050 0x0001      ORRS     R0,R0,#0x1
   \   000000D2   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   000000D4   0x6008             STR      R0,[R1, #+0]
     96            return 1;
   \   000000D6   0x2001             MOVS     R0,#+1
   \   000000D8   0xBDFE             POP      {R1-R7,PC}       ;; return
     97          }
     98          
     99          /*
    100           * LPLD_LPTMR_DeInit
    101           * LPTMR反初始化函数，关闭lptmrx
    102           * 
    103           * 参数:
    104           *    无
    105           *
    106           * 输出:
    107           *    0--配置错误
    108           *    1--配置成功
    109           */

   \                                 In section .text, align 2, keep-with-next
    110          uint8 LPLD_LPTMR_Deinit(void)
    111          {
   \                     LPLD_LPTMR_Deinit: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    112            //清空CSR寄存器
    113            LPTMR0->CSR=0x00;  
   \   00000002   0x2000             MOVS     R0,#+0
   \   00000004   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   00000006   0x6008             STR      R0,[R1, #+0]
    114            //清空PSR寄存器
    115            LPTMR0->PSR=0x00;
   \   00000008   0x2000             MOVS     R0,#+0
   \   0000000A   0x....             LDR.N    R1,??DataTable7_5  ;; 0x40040004
   \   0000000C   0x6008             STR      R0,[R1, #+0]
    116            //清空CMR寄存器
    117            LPTMR0->CMR=0x00;
   \   0000000E   0x2000             MOVS     R0,#+0
   \   00000010   0x....             LDR.N    R1,??DataTable7_6  ;; 0x40040008
   \   00000012   0x6008             STR      R0,[R1, #+0]
    118            //禁止LPTimer中断
    119            disable_irq(LPTimer_IRQn);
   \   00000014   0x2055             MOVS     R0,#+85
   \   00000016   0x.... 0x....      BL       NVIC_DisableIRQ
    120            
    121             //关闭LPTMR时钟
    122            SIM->SCGC5 &= ~(SIM_SCGC5_LPTIMER_MASK);  
   \   0000001A   0x....             LDR.N    R0,??DataTable7_3  ;; 0x40048038
   \   0000001C   0x6800             LDR      R0,[R0, #+0]
   \   0000001E   0x0840             LSRS     R0,R0,#+1
   \   00000020   0x0040             LSLS     R0,R0,#+1
   \   00000022   0x....             LDR.N    R1,??DataTable7_3  ;; 0x40048038
   \   00000024   0x6008             STR      R0,[R1, #+0]
    123            
    124            return 1;
   \   00000026   0x2001             MOVS     R0,#+1
   \   00000028   0xBD02             POP      {R1,PC}          ;; return
    125          }
    126          
    127          /*
    128           *  LPLD_LPTMR_Reset
    129           *  低功耗定时器复位，复位以后清空低功耗定时器Counter
    130           * 
    131           *  参数:
    132           *      无
    133           *  输出:
    134           *      无
    135           */

   \                                 In section .text, align 2, keep-with-next
    136          void LPLD_LPTMR_ResetCounter(void)
    137          {
    138            LPTMR0->CSR&=(~LPTMR_CSR_TEN_MASK);       //Reset LPTMR0 Counter
   \                     LPLD_LPTMR_ResetCounter: (+1)
   \   00000000   0x....             LDR.N    R0,??DataTable7_4  ;; 0x40040000
   \   00000002   0x6800             LDR      R0,[R0, #+0]
   \   00000004   0x0840             LSRS     R0,R0,#+1
   \   00000006   0x0040             LSLS     R0,R0,#+1
   \   00000008   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   0000000A   0x6008             STR      R0,[R1, #+0]
    139          }
   \   0000000C   0x4770             BX       LR               ;; return
    140          /*
    141           * LPLD_LPTMR_EnableIrq
    142           * 使能LPTMR中断功能，在该函数中使能TIE位和LPTMR模块中断
    143           * 
    144           * 参数:
    145           *    无
    146           *
    147           * 输出:
    148           *    0--配置错误
    149           *    1--配置成功
    150           *
    151           */

   \                                 In section .text, align 2, keep-with-next
    152          uint8 LPLD_LPTMR_EnableIrq(void)
    153          {
   \                     LPLD_LPTMR_EnableIrq: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    154            enable_irq(LPTimer_IRQn);
   \   00000002   0x2055             MOVS     R0,#+85
   \   00000004   0x.... 0x....      BL       NVIC_EnableIRQ
    155            return 1;
   \   00000008   0x2001             MOVS     R0,#+1
   \   0000000A   0xBD02             POP      {R1,PC}          ;; return
    156          }
    157          
    158          /*
    159           * LPLD_LPTMR_DisableIrq
    160           * 禁止LPTMR中断
    161           * 
    162           * 参数:
    163           *    无
    164           *
    165           * 输出:
    166           *    0--配置错误
    167           *    1--配置成功
    168           *
    169           */

   \                                 In section .text, align 2, keep-with-next
    170          uint8 LPLD_LPTMR_DisableIrq(void)
    171          {
   \                     LPLD_LPTMR_DisableIrq: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    172            disable_irq(LPTimer_IRQn); 
   \   00000002   0x2055             MOVS     R0,#+85
   \   00000004   0x.... 0x....      BL       NVIC_DisableIRQ
    173            return 1;
   \   00000008   0x2001             MOVS     R0,#+1
   \   0000000A   0xBD02             POP      {R1,PC}          ;; return
    174          }
    175          
    176          /*
    177           *  LPLD_LPTMR_GetPulseAcc
    178           *  得到脉冲累加的值
    179           * 
    180           *  参数:
    181           *      无
    182           *  输出:
    183           *      脉冲累加值
    184           */

   \                                 In section .text, align 2, keep-with-next
    185          uint16 LPLD_LPTMR_GetPulseAcc(void)
    186          {
    187             return (uint16)LPTMR0->CNR;
   \                     LPLD_LPTMR_GetPulseAcc: (+1)
   \   00000000   0x....             LDR.N    R0,??DataTable7_10  ;; 0x4004000c
   \   00000002   0x6800             LDR      R0,[R0, #+0]
   \   00000004   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000006   0x4770             BX       LR               ;; return
    188          }
    189          
    190          /*
    191           *  LPLD_LPTMR_DelayMs
    192           *  低功耗定时器延时n个ms
    193           * 
    194           * 参数:
    195           *    period_ms--设定定时器的定时值 单位ms
    196           *    最大65535ms
    197           *
    198           *  输出:
    199           *      无
    200           */

   \                                 In section .text, align 2, keep-with-next
    201          void LPLD_LPTMR_DelayMs(uint16 period_ms)
    202          {
    203            if(!period_ms)
   \                     LPLD_LPTMR_DelayMs: (+1)
   \   00000000   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000002   0x2800             CMP      R0,#+0
   \   00000004   0xD01B             BEQ.N    ??LPLD_LPTMR_DelayMs_0
    204              return;
    205            
    206            /* 开启LPTMR时钟 */
    207            SIM->SCGC5|=SIM_SCGC5_LPTIMER_MASK; 
   \                     ??LPLD_LPTMR_DelayMs_1: (+1)
   \   00000006   0x....             LDR.N    R1,??DataTable7_3  ;; 0x40048038
   \   00000008   0x6809             LDR      R1,[R1, #+0]
   \   0000000A   0xF051 0x0101      ORRS     R1,R1,#0x1
   \   0000000E   0x....             LDR.N    R2,??DataTable7_3  ;; 0x40048038
   \   00000010   0x6011             STR      R1,[R2, #+0]
    208            
    209            /* 设置毫秒延时计数 */
    210            LPTMR0->CMR = period_ms; 
   \   00000012   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000014   0x....             LDR.N    R1,??DataTable7_6  ;; 0x40040008
   \   00000016   0x6008             STR      R0,[R1, #+0]
    211            
    212            /* 设置LPTMR不分频采用1kHz LPO为时钟源 */
    213            LPTMR0->PSR = 0|LPTMR_PSR_PCS(1)|LPTMR_PSR_PBYP_MASK; 
   \   00000018   0x2105             MOVS     R1,#+5
   \   0000001A   0x....             LDR.N    R2,??DataTable7_5  ;; 0x40040004
   \   0000001C   0x6011             STR      R1,[R2, #+0]
    214            
    215            /* 开启定时器 */
    216            LPTMR0->CSR |= LPTMR_CSR_TEN_MASK; 
   \   0000001E   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   00000020   0x6809             LDR      R1,[R1, #+0]
   \   00000022   0xF051 0x0101      ORRS     R1,R1,#0x1
   \   00000026   0x....             LDR.N    R2,??DataTable7_4  ;; 0x40040000
   \   00000028   0x6011             STR      R1,[R2, #+0]
    217          
    218            /* 等待计数达到设定值 */
    219            while (!(LPTMR0->CSR & LPTMR_CSR_TCF_MASK));
   \                     ??LPLD_LPTMR_DelayMs_2: (+1)
   \   0000002A   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   0000002C   0x6809             LDR      R1,[R1, #+0]
   \   0000002E   0x0609             LSLS     R1,R1,#+24
   \   00000030   0xD5FB             BPL.N    ??LPLD_LPTMR_DelayMs_2
    220            
    221            /*清除定时比较标志 */
    222            LPTMR0->CSR &= ~LPTMR_CSR_TEN_MASK;
   \   00000032   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   00000034   0x6809             LDR      R1,[R1, #+0]
   \   00000036   0x0849             LSRS     R1,R1,#+1
   \   00000038   0x0049             LSLS     R1,R1,#+1
   \   0000003A   0x....             LDR.N    R2,??DataTable7_4  ;; 0x40040000
   \   0000003C   0x6011             STR      R1,[R2, #+0]
    223            
    224          }
   \                     ??LPLD_LPTMR_DelayMs_0: (+1)
   \   0000003E   0x4770             BX       LR               ;; return
    225          
    226          
    227          /*
    228           * LPTMR中断处理函数
    229           * 与启动文件startup_K60.s中的中断向量表关联
    230           * 用户无需修改，程序自动进入对应通道中断函数
    231           */

   \                                 In section .text, align 2, keep-with-next
    232          void LPT_IRQHandler(void)
    233          {
   \                     LPT_IRQHandler: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    234            LPTMR0->CSR|=LPTMR_CSR_TCF_MASK;  //清除LPT比较标志
   \   00000002   0x....             LDR.N    R0,??DataTable7_4  ;; 0x40040000
   \   00000004   0x6800             LDR      R0,[R0, #+0]
   \   00000006   0xF050 0x0080      ORRS     R0,R0,#0x80
   \   0000000A   0x....             LDR.N    R1,??DataTable7_4  ;; 0x40040000
   \   0000000C   0x6008             STR      R0,[R1, #+0]
    235            LPTMR_ISR[0]();
   \   0000000E   0x....             LDR.N    R0,??DataTable7_9
   \   00000010   0x6800             LDR      R0,[R0, #+0]
   \   00000012   0x4780             BLX      R0
    236          }
   \   00000014   0xBD01             POP      {R0,PC}          ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7:
   \   00000000   0xE000E100         DC32     0xe000e100

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_1:
   \   00000000   0xE000E180         DC32     0xe000e180

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_2:
   \   00000000   0x........         DC32     ?_0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_3:
   \   00000000   0x40048038         DC32     0x40048038

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_4:
   \   00000000   0x40040000         DC32     0x40040000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_5:
   \   00000000   0x40040004         DC32     0x40040004

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_6:
   \   00000000   0x40040008         DC32     0x40040008

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_7:
   \   00000000   0x4004904C         DC32     0x4004904c

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_8:
   \   00000000   0x4004B014         DC32     0x4004b014

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_9:
   \   00000000   0x........         DC32     LPTMR_ISR

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7_10:
   \   00000000   0x4004000C         DC32     0x4004000c

   \                                 In section .rodata, align 4
   \                     ?_0:
   \   00000000   0x44 0x3A          DC8 44H, 3AH, 5CH, 4CH, 50H, 4CH, 44H, 56H
   \              0x5C 0x4C    
   \              0x50 0x4C    
   \              0x44 0x56    
   \   00000008   0x33 0x2E          DC8 33H, 2EH, 31H, 5CH, 4CH, 50H, 4CH, 44H
   \              0x31 0x5C    
   \              0x4C 0x50    
   \              0x4C 0x44    
   \   00000010   0x5F 0x4F          DC8 5FH, 4FH, 53H, 4BH, 69H, 6EH, 65H, 74H
   \              0x53 0x4B    
   \              0x69 0x6E    
   \              0x65 0x74    
   \   00000018   0x69 0x73          DC8 69H, 73H, 5FH, 56H, 33H, 5CH, 6CH, 69H
   \              0x5F 0x56    
   \              0x33 0x5C    
   \              0x6C 0x69    
   \   00000020   0x62 0x5C          DC8 62H, 5CH, 4CH, 50H, 4CH, 44H, 5CH, 48H
   \              0x4C 0x50    
   \              0x4C 0x44    
   \              0x5C 0x48    
   \   00000028   0x57 0x5C          DC8 57H, 5CH, 48H, 57H, 5FH, 4CH, 50H, 54H
   \              0x48 0x57    
   \              0x5F 0x4C    
   \              0x50 0x54    
   \   00000030   0x4D 0x52          DC8 4DH, 52H, 2EH, 63H, 0
   \              0x2E 0x63    
   \              0x00         
   \   00000035   0x00 0x00          DC8 0, 0, 0
   \              0x00         

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   LPLD_LPTMR_Deinit
         8   -> NVIC_DisableIRQ
       0   LPLD_LPTMR_DelayMs
       8   LPLD_LPTMR_DisableIrq
         8   -> NVIC_DisableIRQ
       8   LPLD_LPTMR_EnableIrq
         8   -> NVIC_EnableIRQ
       0   LPLD_LPTMR_GetPulseAcc
      32   LPLD_LPTMR_Init
        32   -> assert_failed
       0   LPLD_LPTMR_ResetCounter
       8   LPT_IRQHandler
         8   -- Indirect call
       0   NVIC_DisableIRQ
       0   NVIC_EnableIRQ


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable7
       4  ??DataTable7_1
       4  ??DataTable7_10
       4  ??DataTable7_2
       4  ??DataTable7_3
       4  ??DataTable7_4
       4  ??DataTable7_5
       4  ??DataTable7_6
       4  ??DataTable7_7
       4  ??DataTable7_8
       4  ??DataTable7_9
      56  ?_0
      42  LPLD_LPTMR_Deinit
      64  LPLD_LPTMR_DelayMs
      12  LPLD_LPTMR_DisableIrq
      12  LPLD_LPTMR_EnableIrq
       8  LPLD_LPTMR_GetPulseAcc
     218  LPLD_LPTMR_Init
      14  LPLD_LPTMR_ResetCounter
       4  LPTMR_ISR
      22  LPT_IRQHandler
      20  NVIC_DisableIRQ
      20  NVIC_EnableIRQ

 
   4 bytes in section .bss
  56 bytes in section .rodata
 476 bytes in section .text
 
 476 bytes of CODE  memory
  56 bytes of CONST memory
   4 bytes of DATA  memory

Errors: none
Warnings: none
