###############################################################################
#
# IAR ANSI C/C++ Compiler V7.30.3.8024/W32 for ARM        16/Aug/2016  11:11:17
# Copyright 1999-2014 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\app\CTL\motto.c
#    Command line =  
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\app\CTL\motto.c" -D LPLD_K60 -lCN
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\FLASH\List\" -lB
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\FLASH\List\" -o
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\FLASH\Obj\" --no_cse --no_unroll --no_inline --no_code_motion
#        --no_tbaa --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M4 -e --fpu=None --dlib_config
#        D:\IAR\arm\INC\c\DLib_Config_Normal.h -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\app\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\app\BSP\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\app\ITAC\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\app\CTL\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\app\MAIN\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\app\SENSOR\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\CPU\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\common\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\LPLD\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\LPLD\HW\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\LPLD\DEV\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\uCOS-II\Ports\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\uCOS-II\Source\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\FatFs\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\FatFs\option\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\USB\common\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\USB\driver\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\USB\descriptor\" -I
#        "E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\..\..\..\lib\USB\class\" -On -I D:\IAR\arm\CMSIS\Include\ -D
#        ARM_MATH_CM4
#    List file    =  
#        E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\FLASH\List\motto.lst
#    Object file  =  
#        E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid)
#        1.9\iar\FLASH\Obj\motto.o
#
###############################################################################

E:\飞思卡尔\新工程\LPLD_OSKinetis_V3\project\NXP_(golden_cyprinoid) 1.9\app\CTL\motto.c
      1          //电机控制
      2          #include "include.h"
      3          

   \                                 In section .text, align 2, keep-with-next
      4          void motto_set()
      5          {
   \                     motto_set: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
      6            //限幅
      7            if ( ctl.motto.out > 9500 )
   \   00000002   0x.... 0x....      LDR.W    R0,??DataTable2
   \   00000006   0xF8D0 0x00A0      LDR      R0,[R0, #+160]
   \   0000000A   0x.... 0x....      LDR.W    R1,??DataTable2_1  ;; 0x46147001
   \   0000000E   0x.... 0x....      BL       __aeabi_cfrcmple
   \   00000012   0xD806             BHI.N    ??motto_set_0
      8            {
      9              ctl.motto.out = 9500;
   \   00000014   0x.... 0x....      LDR.W    R0,??DataTable2_2  ;; 0x46147000
   \   00000018   0x.... 0x....      LDR.W    R1,??DataTable2
   \   0000001C   0xF8C1 0x00A0      STR      R0,[R1, #+160]
   \   00000020   0xE00E             B.N      ??motto_set_1
     10            }
     11            else if ( ctl.motto.out < -9500 )
   \                     ??motto_set_0: (+1)
   \   00000022   0x.... 0x....      LDR.W    R0,??DataTable2
   \   00000026   0xF8D0 0x00A0      LDR      R0,[R0, #+160]
   \   0000002A   0x.... 0x....      LDR.W    R1,??DataTable2_3  ;; 0xc6147000
   \   0000002E   0x.... 0x....      BL       __aeabi_cfcmple
   \   00000032   0xD205             BCS.N    ??motto_set_1
     12            {
     13              ctl.motto.out = -9500;
   \   00000034   0x.... 0x....      LDR.W    R0,??DataTable2_3  ;; 0xc6147000
   \   00000038   0x.... 0x....      LDR.W    R1,??DataTable2
   \   0000003C   0xF8C1 0x00A0      STR      R0,[R1, #+160]
     14            }
     15            
     16            if ( ctl.motto.out >= 0.000000  )
   \                     ??motto_set_1: (+1)
   \   00000040   0x.... 0x....      LDR.W    R0,??DataTable2
   \   00000044   0xF8D0 0x00A0      LDR      R0,[R0, #+160]
   \   00000048   0x2100             MOVS     R1,#+0
   \   0000004A   0x.... 0x....      BL       __aeabi_cfrcmple
   \   0000004E   0xD80F             BHI.N    ??motto_set_2
     17            {
     18              LPLD_FTM_PWM_ChangeDuty(FTM0, FTM_Ch1, (uint32) ( ctl.motto.out ) );
   \   00000050   0x....             LDR.N    R0,??DataTable2
   \   00000052   0xF8D0 0x00A0      LDR      R0,[R0, #+160]
   \   00000056   0x.... 0x....      BL       __aeabi_f2uiz
   \   0000005A   0x0002             MOVS     R2,R0
   \   0000005C   0x2101             MOVS     R1,#+1
   \   0000005E   0x....             LDR.N    R0,??DataTable2_4  ;; 0x40038000
   \   00000060   0x.... 0x....      BL       LPLD_FTM_PWM_ChangeDuty
     19              LPLD_FTM_PWM_ChangeDuty(FTM0, FTM_Ch0, (uint32) 0 );
   \   00000064   0x2200             MOVS     R2,#+0
   \   00000066   0x2100             MOVS     R1,#+0
   \   00000068   0x....             LDR.N    R0,??DataTable2_4  ;; 0x40038000
   \   0000006A   0x.... 0x....      BL       LPLD_FTM_PWM_ChangeDuty
   \   0000006E   0xE017             B.N      ??motto_set_3
     20            }
     21            else if ( ctl.motto.out < 0.000000 )
   \                     ??motto_set_2: (+1)
   \   00000070   0x....             LDR.N    R0,??DataTable2
   \   00000072   0xF8D0 0x00A0      LDR      R0,[R0, #+160]
   \   00000076   0x2100             MOVS     R1,#+0
   \   00000078   0x.... 0x....      BL       __aeabi_cfcmple
   \   0000007C   0xD210             BCS.N    ??motto_set_3
     22            {
     23              LPLD_FTM_PWM_ChangeDuty(FTM0, FTM_Ch1, 0 );
   \   0000007E   0x2200             MOVS     R2,#+0
   \   00000080   0x2101             MOVS     R1,#+1
   \   00000082   0x....             LDR.N    R0,??DataTable2_4  ;; 0x40038000
   \   00000084   0x.... 0x....      BL       LPLD_FTM_PWM_ChangeDuty
     24              LPLD_FTM_PWM_ChangeDuty(FTM0, FTM_Ch0, (uint32) ( -ctl.motto.out ) );
   \   00000088   0x....             LDR.N    R0,??DataTable2
   \   0000008A   0xF8D0 0x00A0      LDR      R0,[R0, #+160]
   \   0000008E   0xF090 0x4000      EORS     R0,R0,#0x80000000
   \   00000092   0x.... 0x....      BL       __aeabi_f2uiz
   \   00000096   0x0002             MOVS     R2,R0
   \   00000098   0x2100             MOVS     R1,#+0
   \   0000009A   0x....             LDR.N    R0,??DataTable2_4  ;; 0x40038000
   \   0000009C   0x.... 0x....      BL       LPLD_FTM_PWM_ChangeDuty
     25            }
     26            
     27            push(6,ctl.motto.out);
   \                     ??motto_set_3: (+1)
   \   000000A0   0x....             LDR.N    R0,??DataTable2
   \   000000A2   0xF8D0 0x00A0      LDR      R0,[R0, #+160]
   \   000000A6   0x.... 0x....      BL       __aeabi_f2iz
   \   000000AA   0x0001             MOVS     R1,R0
   \   000000AC   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   000000AE   0x2006             MOVS     R0,#+6
   \   000000B0   0x.... 0x....      BL       `push`
     28          }
   \   000000B4   0xBD01             POP      {R0,PC}          ;; return
     29          
     30          
     31          
     32          //轮子172mm 5000个脉冲
     33          

   \                                 In section .text, align 2, keep-with-next
     34          void motto_getsped()
     35          {
   \                     motto_getsped: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
     36            
     37            ctl.motto.sped_cur =  -LPLD_FTM_GetCounter(FTM2)  ;//赋值需要不可以连等
   \   00000002   0x....             LDR.N    R0,??DataTable2_5  ;; 0x400b8000
   \   00000004   0x.... 0x....      BL       LPLD_FTM_GetCounter
   \   00000008   0x4240             RSBS     R0,R0,#+0
   \   0000000A   0x....             LDR.N    R1,??DataTable2
   \   0000000C   0xF8A1 0x0064      STRH     R0,[R1, #+100]
     38            
     39            LPLD_FTM_ClearCounter(FTM2);
   \   00000010   0x....             LDR.N    R0,??DataTable2_5  ;; 0x400b8000
   \   00000012   0x.... 0x....      BL       LPLD_FTM_ClearCounter
     40            push(5,ctl.motto.sped_cur);  
   \   00000016   0x....             LDR.N    R0,??DataTable2
   \   00000018   0xF8B0 0x1064      LDRH     R1,[R0, #+100]
   \   0000001C   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   0000001E   0x2005             MOVS     R0,#+5
   \   00000020   0x.... 0x....      BL       `push`
     41          }
   \   00000024   0xBD01             POP      {R0,PC}          ;; return
     42          
     43          
     44          
     45          

   \                                 In section .data, align 1
     46          int8 Straight_Flag=1;
   \                     Straight_Flag:
   \   00000000   0x01               DC8 1

   \                                 In section .bss, align 1
     47          boolean speed_up_Enable;
   \                     speed_up_Enable:
   \   00000000                      DS8 1

   \                                 In section .bss, align 1
     48          boolean speed_down_flag;
   \                     speed_down_flag:
   \   00000000                      DS8 1
     49          

   \                                 In section .text, align 2, keep-with-next
     50          void ctl_sped() //速度控制，增量式PI控制
     51          {
   \                     ctl_sped: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
     52            
     53            if(1 == speed_up_Enable)
   \   00000002   0x....             LDR.N    R0,??DataTable2_6
   \   00000004   0x7800             LDRB     R0,[R0, #+0]
   \   00000006   0x2801             CMP      R0,#+1
   \   00000008   0xD15C             BNE.N    ??ctl_sped_0
     54            {
     55              if(line.pos < 52 && line.pos > -52)
   \   0000000A   0x....             LDR.N    R0,??DataTable2_7
   \   0000000C   0xF9B0 0x000A      LDRSH    R0,[R0, #+10]
   \   00000010   0x2834             CMP      R0,#+52
   \   00000012   0xDA2E             BGE.N    ??ctl_sped_1
   \   00000014   0x....             LDR.N    R0,??DataTable2_7
   \   00000016   0xF9B0 0x000A      LDRSH    R0,[R0, #+10]
   \   0000001A   0xF110 0x0F33      CMN      R0,#+51
   \   0000001E   0xDB28             BLT.N    ??ctl_sped_1
     56              {
     57                ctl.motto.distance += ctl.motto.sped_cur;
   \   00000020   0x....             LDR.N    R0,??DataTable2
   \   00000022   0xF8B0 0x00B4      LDRH     R0,[R0, #+180]
   \   00000026   0x....             LDR.N    R1,??DataTable2
   \   00000028   0xF8B1 0x1064      LDRH     R1,[R1, #+100]
   \   0000002C   0x1808             ADDS     R0,R1,R0
   \   0000002E   0x....             LDR.N    R1,??DataTable2
   \   00000030   0xF8A1 0x00B4      STRH     R0,[R1, #+180]
     58                
     59                if(ctl.motto.distance >= 5000)
   \   00000034   0x....             LDR.N    R0,??DataTable2
   \   00000036   0xF9B0 0x00B4      LDRSH    R0,[R0, #+180]
   \   0000003A   0xF241 0x3188      MOVW     R1,#+5000
   \   0000003E   0x4288             CMP      R0,R1
   \   00000040   0xDB13             BLT.N    ??ctl_sped_2
     60                {
     61                  ctl.motto.v_error = 150;
   \   00000042   0x2096             MOVS     R0,#+150
   \   00000044   0x....             LDR.N    R1,??DataTable2
   \   00000046   0xF8A1 0x006A      STRH     R0,[R1, #+106]
     62                  
     63                  speed_down_flag = 1;//减速标志
   \   0000004A   0x2001             MOVS     R0,#+1
   \   0000004C   0x....             LDR.N    R1,??DataTable2_8
   \   0000004E   0x7008             STRB     R0,[R1, #+0]
     64                  if(ctl.motto.distance > 20000)
   \   00000050   0x....             LDR.N    R0,??DataTable2
   \   00000052   0xF9B0 0x00B4      LDRSH    R0,[R0, #+180]
   \   00000056   0xF644 0x6121      MOVW     R1,#+20001
   \   0000005A   0x4288             CMP      R0,R1
   \   0000005C   0xDB36             BLT.N    ??ctl_sped_3
     65                  {
     66                    ctl.motto.distance = 8000;
   \   0000005E   0xF44F 0x50FA      MOV      R0,#+8000
   \   00000062   0x....             LDR.N    R1,??DataTable2
   \   00000064   0xF8A1 0x00B4      STRH     R0,[R1, #+180]
   \   00000068   0xE030             B.N      ??ctl_sped_3
     67                  }
     68                }
     69                else
     70                {
     71                  Straight_Flag = 0;  
   \                     ??ctl_sped_2: (+1)
   \   0000006A   0x2000             MOVS     R0,#+0
   \   0000006C   0x....             LDR.N    R1,??DataTable2_9
   \   0000006E   0x7008             STRB     R0,[R1, #+0]
   \   00000070   0xE02C             B.N      ??ctl_sped_3
     72                }
     73              }
     74              
     75              else if(1 == speed_down_flag && abs(line.pos) < 62 )
   \                     ??ctl_sped_1: (+1)
   \   00000072   0x....             LDR.N    R0,??DataTable2_8
   \   00000074   0x7800             LDRB     R0,[R0, #+0]
   \   00000076   0x2801             CMP      R0,#+1
   \   00000078   0xD118             BNE.N    ??ctl_sped_4
   \   0000007A   0x....             LDR.N    R0,??DataTable2_7
   \   0000007C   0xF9B0 0x000A      LDRSH    R0,[R0, #+10]
   \   00000080   0x.... 0x....      BL       __aeabi_i2f
   \   00000084   0x.... 0x....      BL       abs
   \   00000088   0x283E             CMP      R0,#+62
   \   0000008A   0xDA0F             BGE.N    ??ctl_sped_4
     76              {
     77                  ctl.motto.v_error = 150 - (abs(line.pos) - 52) * 15;
   \   0000008C   0x....             LDR.N    R0,??DataTable2_7
   \   0000008E   0xF9B0 0x000A      LDRSH    R0,[R0, #+10]
   \   00000092   0x.... 0x....      BL       __aeabi_i2f
   \   00000096   0x.... 0x....      BL       abs
   \   0000009A   0x3834             SUBS     R0,R0,#+52
   \   0000009C   0x210F             MOVS     R1,#+15
   \   0000009E   0x4348             MULS     R0,R1,R0
   \   000000A0   0xF1D0 0x0096      RSBS     R0,R0,#+150
   \   000000A4   0x....             LDR.N    R1,??DataTable2
   \   000000A6   0xF8A1 0x006A      STRH     R0,[R1, #+106]
   \   000000AA   0xE00F             B.N      ??ctl_sped_3
     78              }
     79              else
     80              {
     81                ctl.motto.v_error = 0;
   \                     ??ctl_sped_4: (+1)
   \   000000AC   0x2000             MOVS     R0,#+0
   \   000000AE   0x....             LDR.N    R1,??DataTable2
   \   000000B0   0xF8A1 0x006A      STRH     R0,[R1, #+106]
     82                ctl.motto.distance = 0;
   \   000000B4   0x2000             MOVS     R0,#+0
   \   000000B6   0x....             LDR.N    R1,??DataTable2
   \   000000B8   0xF8A1 0x00B4      STRH     R0,[R1, #+180]
     83                speed_down_flag = 0;
   \   000000BC   0x2000             MOVS     R0,#+0
   \   000000BE   0x....             LDR.N    R1,??DataTable2_8
   \   000000C0   0x7008             STRB     R0,[R1, #+0]
   \   000000C2   0xE003             B.N      ??ctl_sped_3
     84              }
     85            }
     86            
     87            else
     88            {
     89              ctl.motto.v_error = 0;
   \                     ??ctl_sped_0: (+1)
   \   000000C4   0x2000             MOVS     R0,#+0
   \   000000C6   0x....             LDR.N    R1,??DataTable2
   \   000000C8   0xF8A1 0x006A      STRH     R0,[R1, #+106]
     90            }
     91            ctl.motto.aim = ctl.motto.v + ctl.motto.v_error;
   \                     ??ctl_sped_3: (+1)
   \   000000CC   0x....             LDR.N    R0,??DataTable2
   \   000000CE   0xF8B0 0x0068      LDRH     R0,[R0, #+104]
   \   000000D2   0x....             LDR.N    R1,??DataTable2
   \   000000D4   0xF8B1 0x106A      LDRH     R1,[R1, #+106]
   \   000000D8   0x1808             ADDS     R0,R1,R0
   \   000000DA   0x....             LDR.N    R1,??DataTable2
   \   000000DC   0xF8A1 0x0066      STRH     R0,[R1, #+102]
     92            
     93            
     94            if(1 == flag_ramp)     //坡道未正常关闭，则一定距离后关闭
   \   000000E0   0x....             LDR.N    R0,??DataTable2_10
   \   000000E2   0x7800             LDRB     R0,[R0, #+0]
   \   000000E4   0x2801             CMP      R0,#+1
   \   000000E6   0xD12B             BNE.N    ??ctl_sped_5
     95            {
     96              ctl.motto.ramp += ctl.motto.sped_cur;
   \   000000E8   0x....             LDR.N    R0,??DataTable2
   \   000000EA   0xF8D0 0x00B8      LDR      R0,[R0, #+184]
   \   000000EE   0x....             LDR.N    R1,??DataTable2
   \   000000F0   0xF9B1 0x1064      LDRSH    R1,[R1, #+100]
   \   000000F4   0x1840             ADDS     R0,R0,R1
   \   000000F6   0x....             LDR.N    R1,??DataTable2
   \   000000F8   0xF8C1 0x00B8      STR      R0,[R1, #+184]
     97              ctl.motto.aim = ctl.motto.v;
   \   000000FC   0x....             LDR.N    R0,??DataTable2
   \   000000FE   0xF8B0 0x0068      LDRH     R0,[R0, #+104]
   \   00000102   0x....             LDR.N    R1,??DataTable2
   \   00000104   0xF8A1 0x0066      STRH     R0,[R1, #+102]
     98              
     99              if(ctl.motto.ramp > 80000)    //计距离强制置0
   \   00000108   0x....             LDR.N    R0,??DataTable2
   \   0000010A   0xF8D0 0x00B8      LDR      R0,[R0, #+184]
   \   0000010E   0x....             LDR.N    R1,??DataTable2_11  ;; 0x13881
   \   00000110   0x4288             CMP      R0,R1
   \   00000112   0xDB48             BLT.N    ??ctl_sped_6
    100              {
    101                flag_ramp = 0;
   \   00000114   0x2000             MOVS     R0,#+0
   \   00000116   0x....             LDR.N    R1,??DataTable2_10
   \   00000118   0x7008             STRB     R0,[R1, #+0]
    102                BZ_OFF;
   \   0000011A   0x2200             MOVS     R2,#+0
   \   0000011C   0x210A             MOVS     R1,#+10
   \   0000011E   0x....             LDR.N    R0,??DataTable2_12  ;; 0x400ff100
   \   00000120   0x.... 0x....      BL       LPLD_GPIO_Output_b
    103                ctl.motto.ramp = 0;
   \   00000124   0x2000             MOVS     R0,#+0
   \   00000126   0x....             LDR.N    R1,??DataTable2
   \   00000128   0xF8C1 0x00B8      STR      R0,[R1, #+184]
    104                ramp_Enable = 0;
   \   0000012C   0x2000             MOVS     R0,#+0
   \   0000012E   0x....             LDR.N    R1,??DataTable2_13
   \   00000130   0x7008             STRB     R0,[R1, #+0]
    105                bz_set(warn);
   \   00000132   0x2002             MOVS     R0,#+2
   \   00000134   0x.... 0x....      BL       bz_set
    106                ramp_cnt = 0;
   \   00000138   0x2000             MOVS     R0,#+0
   \   0000013A   0x....             LDR.N    R1,??DataTable2_14
   \   0000013C   0x7008             STRB     R0,[R1, #+0]
   \   0000013E   0xE032             B.N      ??ctl_sped_6
    107              }
    108            }
    109            else if(ramp_Enable == 0)        //隔大约2m检测下一个坡道
   \                     ??ctl_sped_5: (+1)
   \   00000140   0x....             LDR.N    R0,??DataTable2_13
   \   00000142   0x7800             LDRB     R0,[R0, #+0]
   \   00000144   0x2800             CMP      R0,#+0
   \   00000146   0xD12E             BNE.N    ??ctl_sped_6
    110            {
    111              
    112              ctl.motto.ramp += ctl.motto.sped_cur;
   \   00000148   0x....             LDR.N    R0,??DataTable2
   \   0000014A   0xF8D0 0x00B8      LDR      R0,[R0, #+184]
   \   0000014E   0x....             LDR.N    R1,??DataTable2
   \   00000150   0xF9B1 0x1064      LDRSH    R1,[R1, #+100]
   \   00000154   0x1840             ADDS     R0,R0,R1
   \   00000156   0x....             LDR.N    R1,??DataTable2
   \   00000158   0xF8C1 0x00B8      STR      R0,[R1, #+184]
    113              if(1 == speed_up_Enable)
   \   0000015C   0x....             LDR.N    R0,??DataTable2_6
   \   0000015E   0x7800             LDRB     R0,[R0, #+0]
   \   00000160   0x2801             CMP      R0,#+1
   \   00000162   0xD113             BNE.N    ??ctl_sped_7
    114              {
    115                if(ctl.motto.ramp < 9000)
   \   00000164   0x....             LDR.N    R0,??DataTable2
   \   00000166   0xF8D0 0x00B8      LDR      R0,[R0, #+184]
   \   0000016A   0xF242 0x3128      MOVW     R1,#+9000
   \   0000016E   0x4288             CMP      R0,R1
   \   00000170   0xDA0C             BGE.N    ??ctl_sped_7
    116                  ctl.motto.aim = ctl.motto.v + (ctl.motto.ramp / 60);
   \   00000172   0x....             LDR.N    R0,??DataTable2
   \   00000174   0xF8B0 0x0068      LDRH     R0,[R0, #+104]
   \   00000178   0x....             LDR.N    R1,??DataTable2
   \   0000017A   0xF8D1 0x10B8      LDR      R1,[R1, #+184]
   \   0000017E   0x223C             MOVS     R2,#+60
   \   00000180   0xFB91 0xF1F2      SDIV     R1,R1,R2
   \   00000184   0x1808             ADDS     R0,R1,R0
   \   00000186   0x....             LDR.N    R1,??DataTable2
   \   00000188   0xF8A1 0x0066      STRH     R0,[R1, #+102]
    117              }
    118              
    119              if(ctl.motto.ramp > 80000)
   \                     ??ctl_sped_7: (+1)
   \   0000018C   0x....             LDR.N    R0,??DataTable2
   \   0000018E   0xF8D0 0x00B8      LDR      R0,[R0, #+184]
   \   00000192   0x....             LDR.N    R1,??DataTable2_11  ;; 0x13881
   \   00000194   0x4288             CMP      R0,R1
   \   00000196   0xDB06             BLT.N    ??ctl_sped_6
    120              {
    121                ctl.motto.ramp = 0;
   \   00000198   0x2000             MOVS     R0,#+0
   \   0000019A   0x....             LDR.N    R1,??DataTable2
   \   0000019C   0xF8C1 0x00B8      STR      R0,[R1, #+184]
    122                ramp_Enable = 1;
   \   000001A0   0x2001             MOVS     R0,#+1
   \   000001A2   0x....             LDR.N    R1,??DataTable2_13
   \   000001A4   0x7008             STRB     R0,[R1, #+0]
    123              }
    124            }
    125            
    126            //  push(11,ctl.motto.ramp/10);
    127            
    128            
    129            
    130            ctl.motto.error[1] =   ctl.motto.aim  - ctl.motto.sped_cur;
   \                     ??ctl_sped_6: (+1)
   \   000001A6   0x....             LDR.N    R0,??DataTable2
   \   000001A8   0xF9B0 0x0066      LDRSH    R0,[R0, #+102]
   \   000001AC   0x....             LDR.N    R1,??DataTable2
   \   000001AE   0xF9B1 0x1064      LDRSH    R1,[R1, #+100]
   \   000001B2   0x1A40             SUBS     R0,R0,R1
   \   000001B4   0x.... 0x....      BL       __aeabi_i2f
   \   000001B8   0x....             LDR.N    R1,??DataTable2
   \   000001BA   0xF8C1 0x00A8      STR      R0,[R1, #+168]
    131            //  if(abs(ctl.motto.error[1]) > 50)
    132            //  {
    133            //    if(ctl.motto.error[1] > 50)
    134            //      ctl.motto.out = ;
    135            //  }
    136            
    137            ctl.motto.result[0]  = ctl.motto.Kp  * ( ctl.motto.error[1] - ctl.motto.error[0] );
   \   000001BE   0x....             LDR.N    R0,??DataTable2
   \   000001C0   0xF8D0 0x00A8      LDR      R0,[R0, #+168]
   \   000001C4   0x....             LDR.N    R1,??DataTable2
   \   000001C6   0xF8D1 0x10A4      LDR      R1,[R1, #+164]
   \   000001CA   0x.... 0x....      BL       __aeabi_fsub
   \   000001CE   0x....             LDR.N    R1,??DataTable2
   \   000001D0   0x6EC9             LDR      R1,[R1, #+108]
   \   000001D2   0x.... 0x....      BL       __aeabi_fmul
   \   000001D6   0x....             LDR.N    R1,??DataTable2
   \   000001D8   0xF8C1 0x0098      STR      R0,[R1, #+152]
    138            ctl.motto.result[1] = ctl.motto.Ki  *   ctl.motto.error[1];
   \   000001DC   0x....             LDR.N    R0,??DataTable2
   \   000001DE   0x6F01             LDR      R1,[R0, #+112]
   \   000001E0   0x....             LDR.N    R0,??DataTable2
   \   000001E2   0xF8D0 0x00A8      LDR      R0,[R0, #+168]
   \   000001E6   0x.... 0x....      BL       __aeabi_fmul
   \   000001EA   0x....             LDR.N    R1,??DataTable2
   \   000001EC   0xF8C1 0x009C      STR      R0,[R1, #+156]
    139            
    140            ctl.motto.error[0] = ctl.motto.error[1];  
   \   000001F0   0x....             LDR.N    R0,??DataTable2
   \   000001F2   0xF8D0 0x00A8      LDR      R0,[R0, #+168]
   \   000001F6   0x....             LDR.N    R1,??DataTable2
   \   000001F8   0xF8C1 0x00A4      STR      R0,[R1, #+164]
    141            ctl.motto.out += ctl.motto.result[0] + ctl.motto.result[1];
   \   000001FC   0x....             LDR.N    R0,??DataTable2
   \   000001FE   0xF8D0 0x1098      LDR      R1,[R0, #+152]
   \   00000202   0x....             LDR.N    R0,??DataTable2
   \   00000204   0xF8D0 0x009C      LDR      R0,[R0, #+156]
   \   00000208   0x.... 0x....      BL       __aeabi_fadd
   \   0000020C   0x....             LDR.N    R1,??DataTable2
   \   0000020E   0xF8D1 0x10A0      LDR      R1,[R1, #+160]
   \   00000212   0x.... 0x....      BL       __aeabi_fadd
   \   00000216   0x....             LDR.N    R1,??DataTable2
   \   00000218   0xF8C1 0x00A0      STR      R0,[R1, #+160]
    142            
    143            
    144            
    145            if(1 == ramp_cnt)
   \   0000021C   0x....             LDR.N    R0,??DataTable2_14
   \   0000021E   0x7800             LDRB     R0,[R0, #+0]
   \   00000220   0x2801             CMP      R0,#+1
   \   00000222   0xD111             BNE.N    ??ctl_sped_8
    146            {
    147              if(ctl.motto.error[1] < -40)
   \   00000224   0x....             LDR.N    R0,??DataTable2
   \   00000226   0xF8D0 0x00A8      LDR      R0,[R0, #+168]
   \   0000022A   0x....             LDR.N    R1,??DataTable2_15  ;; 0xc2200000
   \   0000022C   0x.... 0x....      BL       __aeabi_cfcmple
   \   00000230   0xD20A             BCS.N    ??ctl_sped_8
    148                if(ctl.motto.out > -1000)
   \   00000232   0x....             LDR.N    R0,??DataTable2
   \   00000234   0xF8D0 0x00A0      LDR      R0,[R0, #+160]
   \   00000238   0x....             LDR.N    R1,??DataTable2_16  ;; 0xc479ffff
   \   0000023A   0x.... 0x....      BL       __aeabi_cfrcmple
   \   0000023E   0xD803             BHI.N    ??ctl_sped_8
    149                  ctl.motto.out = -1000;
   \   00000240   0x....             LDR.N    R0,??DataTable2_17  ;; 0xc47a0000
   \   00000242   0x....             LDR.N    R1,??DataTable2
   \   00000244   0xF8C1 0x00A0      STR      R0,[R1, #+160]
    150            }
    151            push(4,ctl.motto.aim);
   \                     ??ctl_sped_8: (+1)
   \   00000248   0x....             LDR.N    R0,??DataTable2
   \   0000024A   0xF8B0 0x1066      LDRH     R1,[R0, #+102]
   \   0000024E   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   00000250   0x2004             MOVS     R0,#+4
   \   00000252   0x.... 0x....      BL       `push`
    152            push(11,ctl.motto.result[0]);
   \   00000256   0x....             LDR.N    R0,??DataTable2
   \   00000258   0xF8D0 0x0098      LDR      R0,[R0, #+152]
   \   0000025C   0x.... 0x....      BL       __aeabi_f2iz
   \   00000260   0x0001             MOVS     R1,R0
   \   00000262   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   00000264   0x200B             MOVS     R0,#+11
   \   00000266   0x.... 0x....      BL       `push`
    153            push(12,ctl.motto.result[1]);
   \   0000026A   0x....             LDR.N    R0,??DataTable2
   \   0000026C   0xF8D0 0x009C      LDR      R0,[R0, #+156]
   \   00000270   0x.... 0x....      BL       __aeabi_f2iz
   \   00000274   0x0001             MOVS     R1,R0
   \   00000276   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   00000278   0x200C             MOVS     R0,#+12
   \   0000027A   0x.... 0x....      BL       `push`
    154          }
   \   0000027E   0xBD01             POP      {R0,PC}          ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   0x........         DC32     ctl

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_1:
   \   00000000   0x46147001         DC32     0x46147001

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_2:
   \   00000000   0x46147000         DC32     0x46147000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_3:
   \   00000000   0xC6147000         DC32     0xc6147000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_4:
   \   00000000   0x40038000         DC32     0x40038000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_5:
   \   00000000   0x400B8000         DC32     0x400b8000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_6:
   \   00000000   0x........         DC32     speed_up_Enable

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_7:
   \   00000000   0x........         DC32     line

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_8:
   \   00000000   0x........         DC32     speed_down_flag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_9:
   \   00000000   0x........         DC32     Straight_Flag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_10:
   \   00000000   0x........         DC32     flag_ramp

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_11:
   \   00000000   0x00013881         DC32     0x13881

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_12:
   \   00000000   0x400FF100         DC32     0x400ff100

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_13:
   \   00000000   0x........         DC32     ramp_Enable

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_14:
   \   00000000   0x........         DC32     ramp_cnt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_15:
   \   00000000   0xC2200000         DC32     0xc2200000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_16:
   \   00000000   0xC479FFFF         DC32     0xc479ffff

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_17:
   \   00000000   0xC47A0000         DC32     0xc47a0000

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   ctl_sped
         8   -> LPLD_GPIO_Output_b
         8   -> __aeabi_f2iz
         8   -> __aeabi_fadd
         8   -> __aeabi_fmul
         8   -> __aeabi_fsub
         8   -> __aeabi_i2f
         8   -> abs
         8   -> bz_set
         8   -> push
         8 __aeabi_cfcmple
         8 __aeabi_cfrcmple
       8   motto_getsped
         8   -> LPLD_FTM_ClearCounter
         8   -> LPLD_FTM_GetCounter
         8   -> push
       8   motto_set
         8   -> LPLD_FTM_PWM_ChangeDuty
         8   -> __aeabi_f2iz
         8   -> __aeabi_f2uiz
         8   -> push
         8 __aeabi_cfcmple
         8 __aeabi_cfrcmple


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable2
       4  ??DataTable2_1
       4  ??DataTable2_10
       4  ??DataTable2_11
       4  ??DataTable2_12
       4  ??DataTable2_13
       4  ??DataTable2_14
       4  ??DataTable2_15
       4  ??DataTable2_16
       4  ??DataTable2_17
       4  ??DataTable2_2
       4  ??DataTable2_3
       4  ??DataTable2_4
       4  ??DataTable2_5
       4  ??DataTable2_6
       4  ??DataTable2_7
       4  ??DataTable2_8
       4  ??DataTable2_9
       1  Straight_Flag
     640  ctl_sped
      38  motto_getsped
     182  motto_set
       1  speed_down_flag
       1  speed_up_Enable

 
   2 bytes in section .bss
   1 byte  in section .data
 932 bytes in section .text
 
 932 bytes of CODE memory
   3 bytes of DATA memory

Errors: none
Warnings: 3
